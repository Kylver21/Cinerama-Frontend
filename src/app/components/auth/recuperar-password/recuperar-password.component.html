<div class="recuperar-container">
  <div class="recuperar-card">
    <div class="recuperar-header">
      <mat-icon class="recuperar-icon">lock_reset</mat-icon>
      <h1>Recuperar Contraseña</h1>
      <p *ngIf="!emailEnviado">Ingresa tu email para recibir un enlace de recuperación</p>
      <p *ngIf="emailEnviado" class="success-message">¡Email enviado exitosamente!</p>
    </div>

    <div *ngIf="!emailEnviado">
      <form [formGroup]="recuperarForm" (ngSubmit)="onSubmit()" class="recuperar-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input matInput 
                 type="email"
                 formControlName="email" 
                 placeholder="tu@email.com"
                 autocomplete="email">
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="recuperarForm.get('email')?.hasError('required') && recuperarForm.get('email')?.touched">
            {{ getErrorMessage('email') }}
          </mat-error>
          <mat-error *ngIf="recuperarForm.get('email')?.hasError('email') && recuperarForm.get('email')?.touched">
            {{ getErrorMessage('email') }}
          </mat-error>
        </mat-form-field>

        <button mat-raised-button 
                color="primary" 
                type="submit" 
                class="recuperar-button"
                [disabled]="loading || recuperarForm.invalid">
          <mat-spinner *ngIf="loading" diameter="20"></mat-spinner>
          <span *ngIf="!loading">Enviar Enlace</span>
        </button>
      </form>
    </div>

    <div *ngIf="emailEnviado" class="email-enviado">
      <div class="success-icon">
        <mat-icon>check_circle</mat-icon>
      </div>
      <h3>Revisa tu email</h3>
      <p>Hemos enviado un enlace de recuperación a:</p>
      <p class="email-address">{{ recuperarForm.get('email')?.value }}</p>
      <p class="instructions">
        Sigue las instrucciones en el email para restablecer tu contraseña.
        Si no ves el email, revisa tu carpeta de spam.
      </p>
      
      <div class="action-buttons">
        <button mat-raised-button color="primary" (click)="reenviarEmail()">
          <mat-icon>refresh</mat-icon>
          Reenviar Email
        </button>
        <button mat-button (click)="irALogin()">
          <mat-icon>arrow_back</mat-icon>
          Volver al Login
        </button>
      </div>
    </div>

    <div class="recuperar-footer">
      <p>¿Recordaste tu contraseña?</p>
      <button mat-button color="accent" (click)="irALogin()">
        Inicia sesión aquí
      </button>
    </div>
  </div>
</div>




